file(GLOB MODULE_UNITS
    CONFIGURE_DEPENDS
    "${CMAKE_CURRENT_SOURCE_DIR}/*.ixx"
)

file(GLOB IMPL_SOURCES
    CONFIGURE_DEPENDS
    "${CMAKE_CURRENT_SOURCE_DIR}/*.cpp"
)

nr_add_library(hello STATIC)
target_sources(hello
    PRIVATE
        ${IMPL_SOURCES}
    PUBLIC
        FILE_SET cxx_modules TYPE CXX_MODULES FILES ${MODULE_UNITS}
)

source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES
    src/${MODULE_UNITS}
    src/${IMPL_SOURCES}
)

# 如需在模块或实现中包含本目录头文件
# target_include_directories(hello PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})

# 方便外部以 hello::hello 引用
# add_library(hello::hello ALIAS hello)